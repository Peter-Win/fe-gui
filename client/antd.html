<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Antd</title>
    <link href="style.css" rel="stylesheet" />
    <link href="ctrl.css" rel="stylesheet" />
    <script src="vendor/jquery.js"></script>
    <script src="vendor/radon2.js"></script>
    <style>
        #Antd_preview {width: 280px; height: 210px;
            background: aquamarine; margin-right: 1em;
            border: thin solid silver;
            box-sizing: border-box;
        }
        .horiz-radio-box .rn-radiobox > div { display: inline-block;}
        .ant-preview-row { display: flex; flex-direction: row;}
        .ant-preview-row-item { height: 100%; }
        .ant-preview-row-item { display: flex; justify-content: center; align-items: center;}
        .ant-preview-sider { writing-mode: vertical-lr; }
    </style>
    <script>
        $(function (){
            Rn.init('start');
        });
        Rn.F.Antd = function () {
            this.superClass = 'Base';
            this.onInit = function () {
                this.load({
                    createCode: true,
                    useHeader: true,
                    useSide: false,
                    useFooter: true,
                    menuPos: 'header',
                });
            }
            this.onPostUpdate = function () {
                var form = this, ctrls = form.ctrls;
                var isCode = ctrls.createCode.getValue();
                $('#Antd_code').toggle(isCode);
                var isUseHeader = ctrls.useHeader.getValue(), isUseSider = ctrls.useSider.getValue();
                var ctrlUseMenu = ctrls.useMenu, ctrlMenuPos = ctrls.menuPos;
                var isCanUseMenu = isUseHeader || isUseSider;
                ctrlUseMenu.enable(isCanUseMenu);
                ctrlMenuPos.show(ctrlUseMenu.getValue() && isCanUseMenu);
                g_antMenuPos[0].disabled = !isUseHeader;
                g_antMenuPos[1].disabled = !isUseSider;
                if (ctrlMenuPos.isVisible()) {
                    var menuPos = ctrlMenuPos.getValue();
                    if (!isUseHeader && menuPos === 'header') ctrlMenuPos.setValue('sider');
                    else if (!isUseSider && menuPos === 'sider') ctrlMenuPos.setValue('header');
                    ctrlMenuPos.buildList();
                }
                this.drawPreview();
            }
            this.drawPreview = function () {
                var ctrls = this.ctrls;
                var $preview = $('#Antd_preview').empty();
                $preview.css({display: 'flex', flexDirection: 'column'});
                if (ctrls.useHeader.getValue()) {
                    $('<div>').appendTo($preview).css({height: '20%', background: '#0AA'}).text('Header');
                }
                var $center = $('<div>').appendTo($preview).addClass('ant-preview-row').css({flex: 1});
                if (ctrls.useSider.getValue()) {
                    var $sider = $('<div>').appendTo($center).addClass('ant-preview-row-item')
                        .css({width: '20%', background: '#08F'}).text('Sider');
                }
                $('<div>').appendTo($center).addClass('ant-preview-row-item').css({flex: 1, background: '#FFE'}).text('Content');
                if (ctrls.useFooter.getValue()) {
                    $('<div>').appendTo($preview).css({height: '20%', background: '#0AA'}).text('Footer');
                }
            }
        }
    </script>
</head>
<body>
  <h1>Antd settings</h1>
  <div class="rn-page" data-name="start">
  <form class="rn-form" name="settings" data-type="Antd">
      <div class="rn-ctrl" data-name="createCode" data-type="Checkbox" data-title="Generate MainFrame" data-value0="true"></div>
      <div id="Antd_code">
          <h2>Antd code</h2>
          <div style="display: flex;">
              <div id="Antd_preview"></div>
              <div>
                  <div class="rn-ctrl" data-name="useHeader" data-type="Checkbox" data-title="Use Header"></div>
                  <div class="rn-ctrl" data-name="useSider" data-type="Checkbox" data-title="Use Sider"></div>
                  <div class="rn-ctrl" data-name="useFooter" data-type="Checkbox" data-title="Use Footer"></div>
                  <div class="rn-ctrl" data-name="useMenu" data-type="Checkbox" data-title="Use Menu"></div>
                  <div class="rn-ctrl horiz-radio-box" data-name="menuPos" data-type="Radiobox" data-radio_tm="TmRadioItem"
                       data-options="g_antMenuPos"></div>
              </div>
          </div>
      </div>
  </form>
      <script>
          var g_antMenuPos = [{label: 'In Header', value: 'header'}, {label: 'In Sider', value: 'sider'}];
      </script>
  </div>

  <script id="TmCtrlString" type="text/html">
      <div>
          <span class="title">{{title}}</span>
          <input type="{{input_type}}" name="{{name}}"
                 {{#maxlength}}maxlength="{{maxlength}}" {{/maxlength}}
          {{#placeholder}}placeholder="{{placeholder}}"{{/placeholder}} />
      </div>
  </script>
  <script id="TmScriptName" type="text/html">
      <span class="script-name-block"><input type="text" name="{{name}}" /> {{title}}</span>
  </script>
  <script id="TmCtrlRadiobox" type="text/html">
      <div>
          {{#title}}<span class="title">{{title}}</span>{{/title}}
          <div class="rn-radiobox" style="display:inline-block"></div>
      </div>
  </script>
  <script id="TmRadioItem" type="text/html">
      <div>
          {{^disabled}}
          <label><input type="radio" name="{{name}}" value="{{value}}"/> {{label}}</label>
          {{/disabled}}
          {{#disabled}}
          <label>
              <input type="radio" name="{{name}}" value="{{value}}" disabled/>
              <span class="disabled">{{label}}</span>
          </label>
          {{/disabled}}
      </div>
  </script>
  <script id='TmCtrlCheckbox' type='text/html'>
      <div>
          <label title="{{tooltip}}">
              <input type='checkbox' name='{{name}}'>{{#title}} {{title}}{{/title}}
          </label>
      </div>
  </script>

</body>
</html>